entities:
- name: datasource_mapping
  namespace: laplacian.arch.deployment

  properties:
  - name: name
    type: string
    optional: true
    default_value: |
      "default"

  - name: is_default
    type: boolean
    snippet: |
      name == "default"

  - name: component_name
    type: string

  relationships:
  - name: datasource
    reference_entity_name: datasource
    cardinality: '1'
    snippet: |
      service.functionModel.datasources.find{ it.name == name }!!

  - name: service
    reference_entity_name: springboot2_api_service
    cardinality: '1'
    reverse_of: datasource_mappings

  - name: component
    reference_entity_name: component
    cardinality: '1'
    mappings:
    - from: component_name
      to: name

